<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Projekt Ei: HardwareLife/Lcd/ESP32_TFT_library/components/spidriver/spi_master_lobo.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Projekt Ei
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('spi__master__lobo_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spi_master_lobo.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;soc/gpio_sig_map.h&quot;</code><br />
<code>#include &quot;soc/spi_reg.h&quot;</code><br />
<code>#include &quot;soc/dport_reg.h&quot;</code><br />
<code>#include &quot;soc/rtc_cntl_reg.h&quot;</code><br />
<code>#include &quot;esp32/rom/ets_sys.h&quot;</code><br />
<code>#include &quot;esp_types.h&quot;</code><br />
<code>#include &quot;esp_attr.h&quot;</code><br />
<code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;esp_err.h&quot;</code><br />
<code>#include &quot;freertos/semphr.h&quot;</code><br />
<code>#include &quot;freertos/xtensa_api.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;freertos/ringbuf.h&quot;</code><br />
<code>#include &quot;soc/soc.h&quot;</code><br />
<code>#include &quot;soc/uart_struct.h&quot;</code><br />
<code>#include &quot;driver/uart.h&quot;</code><br />
<code>#include &quot;driver/gpio.h&quot;</code><br />
<code>#include &quot;driver/periph_ctrl.h&quot;</code><br />
<code>#include &quot;esp_heap_caps.h&quot;</code><br />
<code>#include &quot;<a class="el" href="spi__master__lobo_8h_source.html">spi_master_lobo.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for spi_master_lobo.c:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c__incl.png" border="0" usemap="#_hardware_life_2_lcd_2_e_s_p32___t_f_t__library_2components_2spidriver_2spi__master__lobo_8c" alt=""/></div>
<map name="_hardware_life_2_lcd_2_e_s_p32___t_f_t__library_2components_2spidriver_2spi__master__lobo_8c" id="_hardware_life_2_lcd_2_e_s_p32___t_f_t__library_2components_2spidriver_2spi__master__lobo_8c">
<area shape="rect" id="node24" href="spi__master__lobo_8h.html" title="spi_master_lobo.h" alt="" coords="300,109,428,136"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structspi__signal__conn__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#structspi__signal__conn__t">spi_signal_conn_t</a></td></tr>
<tr class="separator:structspi__signal__conn__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3e24e009df296dd5682d3dc07287353e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a3e24e009df296dd5682d3dc07287353e">SPI_CHECK</a>(a,  str,  ret_val)</td></tr>
<tr class="separator:a3e24e009df296dd5682d3dc07287353e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3eeaa139746fd4ce933803ce6679d2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#af3eeaa139746fd4ce933803ce6679d2b">DMA_CHANNEL_ENABLED</a>(dma_chan)&#160;&#160;&#160;(BIT(dma_chan-1))</td></tr>
<tr class="separator:af3eeaa139746fd4ce933803ce6679d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7d4300ff147fff01be8e2c1a502f1342"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a7d4300ff147fff01be8e2c1a502f1342">dmaworkaround_cb_t</a>) (void *arg)</td></tr>
<tr class="separator:a7d4300ff147fff01be8e2c1a502f1342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afbd48c0566cfee5cdbefc612c65610b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#afbd48c0566cfee5cdbefc612c65610b6">spi_lobo_setup_dma_desc_links</a> (lldesc_t *dmadesc, int len, const uint8_t *data, bool isrx)</td></tr>
<tr class="memdesc:afbd48c0566cfee5cdbefc612c65610b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup a DMA link chain.  <a href="#afbd48c0566cfee5cdbefc612c65610b6">More...</a><br /></td></tr>
<tr class="separator:afbd48c0566cfee5cdbefc612c65610b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2773e4297618ca50ed6544394a28b12"><td class="memItemLeft" align="right" valign="top">bool IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#af2773e4297618ca50ed6544394a28b12">spi_lobo_dmaworkaround_req_reset</a> (int dmachan, <a class="el" href="spi__master__lobo_8c.html#a7d4300ff147fff01be8e2c1a502f1342">dmaworkaround_cb_t</a> cb, void *arg)</td></tr>
<tr class="separator:af2773e4297618ca50ed6544394a28b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c564c0847b329912a678ec245d4530"><td class="memItemLeft" align="right" valign="top">bool IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ae1c564c0847b329912a678ec245d4530">spi_lobo_dmaworkaround_reset_in_progress</a> ()</td></tr>
<tr class="memdesc:ae1c564c0847b329912a678ec245d4530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a DMA reset is requested but has not completed yet.  <a href="#ae1c564c0847b329912a678ec245d4530">More...</a><br /></td></tr>
<tr class="separator:ae1c564c0847b329912a678ec245d4530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da64efc4412da487c6e1094374dc85d"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a5da64efc4412da487c6e1094374dc85d">spi_lobo_dmaworkaround_idle</a> (int dmachan)</td></tr>
<tr class="memdesc:a5da64efc4412da487c6e1094374dc85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a DMA channel as idle.  <a href="#a5da64efc4412da487c6e1094374dc85d">More...</a><br /></td></tr>
<tr class="separator:a5da64efc4412da487c6e1094374dc85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82ab5757c0f2f2d8345ba855313352f"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ac82ab5757c0f2f2d8345ba855313352f">spi_lobo_dmaworkaround_transfer_active</a> (int dmachan)</td></tr>
<tr class="memdesc:ac82ab5757c0f2f2d8345ba855313352f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a DMA channel as active.  <a href="#ac82ab5757c0f2f2d8345ba855313352f">More...</a><br /></td></tr>
<tr class="separator:ac82ab5757c0f2f2d8345ba855313352f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2175e2887a4b28e05f1b62a1d95e3523"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a2175e2887a4b28e05f1b62a1d95e3523">spi_lobo_periph_claim</a> (<a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a> host)</td></tr>
<tr class="separator:a2175e2887a4b28e05f1b62a1d95e3523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cfd6d9164d3f2ace4f6d7f1c4e14503"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a2cfd6d9164d3f2ace4f6d7f1c4e14503">spi_lobo_periph_free</a> (<a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a> host)</td></tr>
<tr class="separator:a2cfd6d9164d3f2ace4f6d7f1c4e14503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac925bdfeebe7b9a0ec1b0e2732280e2f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ac925bdfeebe7b9a0ec1b0e2732280e2f">spi_lobo_dma_chan_claim</a> (int dma_chan)</td></tr>
<tr class="separator:ac925bdfeebe7b9a0ec1b0e2732280e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8154907dcd4be54c64ea247a40d5947"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ae8154907dcd4be54c64ea247a40d5947">spi_lobo_dma_chan_free</a> (int dma_chan)</td></tr>
<tr class="separator:ae8154907dcd4be54c64ea247a40d5947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cde37ee54e5cf2aeb84d9cf94fbb8f0"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a9cde37ee54e5cf2aeb84d9cf94fbb8f0">spi_lobo_bus_add_device</a> (<a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a> host, <a class="el" href="spi__master__lobo_8h.html#structspi__lobo__bus__config__t">spi_lobo_bus_config_t</a> *bus_config, <a class="el" href="spi__master__lobo_8h.html#structspi__lobo__device__interface__config__t">spi_lobo_device_interface_config_t</a> *dev_config, <a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> *handle)</td></tr>
<tr class="memdesc:a9cde37ee54e5cf2aeb84d9cf94fbb8f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a device. This allocates a CS line for the device, allocates memory for the device structure and hooks up the CS pin to whatever is specified.  <a href="#a9cde37ee54e5cf2aeb84d9cf94fbb8f0">More...</a><br /></td></tr>
<tr class="separator:a9cde37ee54e5cf2aeb84d9cf94fbb8f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26bfad2bbea5b8b0c4d29a44bed91494"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a26bfad2bbea5b8b0c4d29a44bed91494">spi_lobo_bus_remove_device</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="memdesc:a26bfad2bbea5b8b0c4d29a44bed91494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a device from the SPI bus. If after removal no other device is attached to the spi bus device, it is freed.  <a href="#a26bfad2bbea5b8b0c4d29a44bed91494">More...</a><br /></td></tr>
<tr class="separator:a26bfad2bbea5b8b0c4d29a44bed91494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb77c930dad6f5b48cd33f969ee7202"><td class="memItemLeft" align="right" valign="top">esp_err_t IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202">spi_lobo_device_select</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle, int force)</td></tr>
<tr class="memdesc:accb77c930dad6f5b48cd33f969ee7202"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select spi device for transmission.  <a href="#accb77c930dad6f5b48cd33f969ee7202">More...</a><br /></td></tr>
<tr class="separator:accb77c930dad6f5b48cd33f969ee7202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af438dacab126c7341147bab887d3d017"><td class="memItemLeft" align="right" valign="top">esp_err_t IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017">spi_lobo_device_deselect</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="memdesc:af438dacab126c7341147bab887d3d017"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-select spi device.  <a href="#af438dacab126c7341147bab887d3d017">More...</a><br /></td></tr>
<tr class="separator:af438dacab126c7341147bab887d3d017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa586bdb99451210c7ad47e29665098cb"><td class="memItemLeft" align="right" valign="top">esp_err_t IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#aa586bdb99451210c7ad47e29665098cb">spi_lobo_device_TakeSemaphore</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="separator:aa586bdb99451210c7ad47e29665098cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab59d9707ee5d72fbc7e56af6db699c38"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ab59d9707ee5d72fbc7e56af6db699c38">spi_lobo_device_GiveSemaphore</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="separator:ab59d9707ee5d72fbc7e56af6db699c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa854233c497b89be628679dfdc8f163e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#aa854233c497b89be628679dfdc8f163e">spi_lobo_get_speed</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="memdesc:aa854233c497b89be628679dfdc8f163e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the actuall SPI bus speed for the spi device in Hz.  <a href="#aa854233c497b89be628679dfdc8f163e">More...</a><br /></td></tr>
<tr class="separator:aa854233c497b89be628679dfdc8f163e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9adfede36ff48e03fef4f4c7596bdb"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a7b9adfede36ff48e03fef4f4c7596bdb">spi_lobo_set_speed</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle, uint32_t speed)</td></tr>
<tr class="memdesc:a7b9adfede36ff48e03fef4f4c7596bdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the new clock speed for the device, return the actuall SPI bus speed set, in Hz This function can be used after the device is initialized.  <a href="#a7b9adfede36ff48e03fef4f4c7596bdb">More...</a><br /></td></tr>
<tr class="separator:a7b9adfede36ff48e03fef4f4c7596bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00be9c566e4805cb3007fd4b0e075c3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#ab00be9c566e4805cb3007fd4b0e075c3">spi_lobo_uses_native_pins</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle)</td></tr>
<tr class="memdesc:ab00be9c566e4805cb3007fd4b0e075c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if spi bus uses native spi pins.  <a href="#ab00be9c566e4805cb3007fd4b0e075c3">More...</a><br /></td></tr>
<tr class="separator:ab00be9c566e4805cb3007fd4b0e075c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4047c33b24fb219f4dd02b293851c265"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#a4047c33b24fb219f4dd02b293851c265">spi_lobo_get_native_pins</a> (int host, int *sdi, int *sdo, int *sck)</td></tr>
<tr class="memdesc:a4047c33b24fb219f4dd02b293851c265"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get spi bus native spi pins.  <a href="#a4047c33b24fb219f4dd02b293851c265">More...</a><br /></td></tr>
<tr class="separator:a4047c33b24fb219f4dd02b293851c265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af013ec9776a6cb6735f7999807274ba8"><td class="memItemLeft" align="right" valign="top">esp_err_t IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__master__lobo_8c.html#af013ec9776a6cb6735f7999807274ba8">spi_lobo_transfer_data</a> (<a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> handle, <a class="el" href="spi__master__lobo_8h.html#structspi__lobo__transaction__t">spi_lobo_transaction_t</a> *trans)</td></tr>
<tr class="memdesc:af013ec9776a6cb6735f7999807274ba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transimit and receive data to/from spi device based on transaction data.  <a href="#af013ec9776a6cb6735f7999807274ba8">More...</a><br /></td></tr>
<tr class="separator:af013ec9776a6cb6735f7999807274ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structspi__signal__conn__t" id="structspi__signal__conn__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structspi__signal__conn__t">&#9670;&nbsp;</a></span>spi_signal_conn_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct spi_signal_conn_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div class="dynheader">
Collaboration diagram for spi_signal_conn_t:</div>
<div class="dyncontent">
<div class="center"><img src="structspi__signal__conn__t__coll__graph.png" border="0" usemap="#spi__signal__conn__t_coll__map" alt="Collaboration graph"/></div>
<map name="spi__signal__conn__t_coll__map" id="spi__signal__conn__t_coll__map">
</map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="ab565ed78a38cfcb35e4ef1e64689f217"></a>spi_dev_t *</td>
<td class="fieldname">
hw</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a82eb5a5114321d2b6e01d85412612fbd"></a>const uint8_t</td>
<td class="fieldname">
irq</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a3815dbfa5fd8fbad0392a64e2b7d4651"></a>const uint8_t</td>
<td class="fieldname">
irq_dma</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aca10b7b0275f6d7d0a7c3070ca533e0e"></a>const periph_module_t</td>
<td class="fieldname">
module</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae9efd00bcdf67a23b5c5d2b92269ec7f"></a>const uint8_t</td>
<td class="fieldname">
spiclk_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a281d055129e0467d75b04cb7b5a7b5b4"></a>const uint8_t</td>
<td class="fieldname">
spiclk_out</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a66fea418251ea7fe4c90e1d5481aa4df"></a>const uint8_t</td>
<td class="fieldname">
spics0_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a74c01a5030a9c809a331b94a9538157e"></a>const uint8_t</td>
<td class="fieldname">
spics_out[3]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a160e96820c7e8462f1678a2d7f102afa"></a>const uint8_t</td>
<td class="fieldname">
spid_in</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="afadc83695a3110598baae5d57130c1ac"></a>const uint8_t</td>
<td class="fieldname">
spid_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5adfc5f44bf7f555b719c1e49cc26767"></a>const uint8_t</td>
<td class="fieldname">
spid_out</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8dc175c3cacac689bf369f8d6e686625"></a>const uint8_t</td>
<td class="fieldname">
spihd_in</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae6f69b24ce64fe452f7763e6bc590139"></a>const uint8_t</td>
<td class="fieldname">
spihd_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aad255bfbcf1c8e9e07c767f8b9ac6cf6"></a>const uint8_t</td>
<td class="fieldname">
spihd_out</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ab01cffa27ec2662dda5c70a8885752ea"></a>const uint8_t</td>
<td class="fieldname">
spiq_in</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a445a2b1a0c501f4c7c1d9ae774a81f63"></a>const uint8_t</td>
<td class="fieldname">
spiq_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a408c632f9fb2177e25eb694f6993cb66"></a>const uint8_t</td>
<td class="fieldname">
spiq_out</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7d7a656af559368d363eaeec0c76bb4f"></a>const uint8_t</td>
<td class="fieldname">
spiwp_in</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a297452ac19d5c8b8e36750fb3f31e17e"></a>const uint8_t</td>
<td class="fieldname">
spiwp_native</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af7070f66a9408dbbddfa6e883785f6ac"></a>const uint8_t</td>
<td class="fieldname">
spiwp_out</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af3eeaa139746fd4ce933803ce6679d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3eeaa139746fd4ce933803ce6679d2b">&#9670;&nbsp;</a></span>DMA_CHANNEL_ENABLED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMA_CHANNEL_ENABLED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dma_chan</td><td>)</td>
          <td>&#160;&#160;&#160;(BIT(dma_chan-1))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3e24e009df296dd5682d3dc07287353e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e24e009df296dd5682d3dc07287353e">&#9670;&nbsp;</a></span>SPI_CHECK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_CHECK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">str, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret_val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span> (!(a)) { \</div><div class="line">        ESP_LOGE(SPI_TAG,<span class="stringliteral">&quot;%s(%d): %s&quot;</span>, __FUNCTION__, __LINE__, str); \</div><div class="line">        return (ret_val); \</div><div class="line">    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a7d4300ff147fff01be8e2c1a502f1342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d4300ff147fff01be8e2c1a502f1342">&#9670;&nbsp;</a></span>dmaworkaround_cb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* dmaworkaround_cb_t) (void *arg)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9cde37ee54e5cf2aeb84d9cf94fbb8f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cde37ee54e5cf2aeb84d9cf94fbb8f0">&#9670;&nbsp;</a></span>spi_lobo_bus_add_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t spi_lobo_bus_add_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a>&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#structspi__lobo__bus__config__t">spi_lobo_bus_config_t</a> *&#160;</td>
          <td class="paramname"><em>bus_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#structspi__lobo__device__interface__config__t">spi_lobo_device_interface_config_t</a> *&#160;</td>
          <td class="paramname"><em>dev_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a> *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a device. This allocates a CS line for the device, allocates memory for the device structure and hooks up the CS pin to whatever is specified. </p>
<p>This initializes the internal structures for a device, plus allocates a CS pin on the indicated SPI master peripheral and routes it to the indicated GPIO. All SPI master devices have three hw CS pins and can thus control up to three devices. Software handled CS pin can also be used for additional devices on the same SPI bus.</p>
<h3>If selected SPI host device bus is not yet initialized, it is initialized first with 'bus_config' function</h3>
<dl class="section note"><dt>Note</dt><dd>While in general, speeds up to 80MHz on the dedicated SPI pins and 40MHz on GPIO-matrix-routed pins are supported, full-duplex transfers routed over the GPIO matrix only support speeds up to 26MHz.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>SPI peripheral to allocate device on (HSPI or VSPI) </td></tr>
    <tr><td class="paramname">dev_config</td><td>SPI interface protocol config for the device </td></tr>
    <tr><td class="paramname">bus_config</td><td>Pointer to a <a class="el" href="spi__master__lobo_8h.html#structspi__lobo__bus__config__t" title="This is a configuration structure for a SPI bus. ">spi_lobo_bus_config_t</a> struct specifying how the host device bus should be initialized </td></tr>
    <tr><td class="paramname">handle</td><td>Pointer to variable to hold the device handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>ESP_ERR_INVALID_ARG if parameter is invalid</li>
<li>ESP_ERR_NOT_FOUND if host doesn't have any free CS slots</li>
<li>ESP_ERR_NO_MEM if out of memory</li>
<li>ESP_OK on success </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14afa34c576e6f6e46e763596df67e0f1ab47">TFT_SPI_HOST</a>, and <a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14afa8e68648e25916d7dbf9b3e75efe74a3e">TFT_VSPI_HOST</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>, and <a class="el" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85">TftDisplayBackend()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_a9cde37ee54e5cf2aeb84d9cf94fbb8f0_icgraph.png" border="0" usemap="#spi__master__lobo_8c_a9cde37ee54e5cf2aeb84d9cf94fbb8f0_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_a9cde37ee54e5cf2aeb84d9cf94fbb8f0_icgraph" id="spi__master__lobo_8c_a9cde37ee54e5cf2aeb84d9cf94fbb8f0_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="251,5,330,32"/>
<area shape="rect" id="node3" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85" title="TftDisplayBackend" alt="" coords="224,56,357,83"/>
<area shape="rect" id="node4" href="class_content.html#af14b7b5ebc756686ecde73dc09b57c56" title="Content::Content" alt="" coords="405,56,528,83"/>
</map>
</div>

</div>
</div>
<a id="a26bfad2bbea5b8b0c4d29a44bed91494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26bfad2bbea5b8b0c4d29a44bed91494">&#9670;&nbsp;</a></span>spi_lobo_bus_remove_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t spi_lobo_bus_remove_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a device from the SPI bus. If after removal no other device is attached to the spi bus device, it is freed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle to free </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>ESP_ERR_INVALID_ARG if parameter is invalid</li>
<li>ESP_ERR_INVALID_STATE if device already is freed</li>
<li>ESP_OK on success </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a2d0c39c04698d66e0716ef216de2deb4">spi_lobo_host_t::device</a>, <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#aad4cdc567d587f8fb090c0681733b3d6">spi_lobo_device_t::host_dev</a>, and <a class="el" href="spi__master__lobo_8h.html#a9d357b54d006248103c7445724b816dd">NO_DEV</a>.</p>

</div>
</div>
<a id="af438dacab126c7341147bab887d3d017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af438dacab126c7341147bab887d3d017">&#9670;&nbsp;</a></span>spi_lobo_device_deselect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t IRAM_ATTR spi_lobo_device_deselect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-select spi device. </p>
<p>If device's spics_io_num=-1 and spics_ext_io_num &gt; 0 'spics_ext_io_num' pin is set to inactive state (high)</p>
<p>spi bus device's semaphore is given after selecting the device</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>ESP_ERR_INVALID_ARG if parameter is invalid</li>
<li>ESP_OK on success </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#af2483849a2070b707c075ec237b272b5">spi_lobo_device_t::cfg</a>, <a class="el" href="spi__master__lobo_8h.html#ae1249747858b1123f0ece404a1db6ef4">spi_lobo_host_t::cur_device</a>, <a class="el" href="spi__master__lobo_8h.html#a2d0c39c04698d66e0716ef216de2deb4">spi_lobo_host_t::device</a>, <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#a9d357b54d006248103c7445724b816dd">NO_DEV</a>, <a class="el" href="spi__master__lobo_8h.html#a34a48bc1f9e3bd7f3a272484bed8cdc3">spi_lobo_device_interface_config_t::selected</a>, <a class="el" href="spi__master__lobo_8h.html#aee709556a4c39503152f50f65130232f">spi_lobo_host_t::spi_lobo_bus_mutex</a>, <a class="el" href="spi__master__lobo_8h.html#a401358f9287a2f47f6ac5511b5014c3d">spi_lobo_device_interface_config_t::spics_ext_io_num</a>, and <a class="el" href="spi__master__lobo_8h.html#a52c49fe0148deb389a6653541c851bbb">spi_lobo_device_interface_config_t::spics_io_num</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>, <a class="el" href="tftspi_8h.html#ad03394df0f5eec8690112800456aa333">disp_deselect()</a>, <a class="el" href="spi__master__lobo_8h.html#aa854233c497b89be628679dfdc8f163e">spi_lobo_get_speed()</a>, <a class="el" href="spi__master__lobo_8h.html#a7b9adfede36ff48e03fef4f4c7596bdb">spi_lobo_set_speed()</a>, <a class="el" href="spi__master__lobo_8h.html#af9e4e3ab6395f45cc506d72b2b0329d9">spi_lobo_transfer_data()</a>, <a class="el" href="tft_8h.html#a2fe1259ac56d938ba10215531aaffb22">TFT_bmp_image()</a>, and <a class="el" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85">TftDisplayBackend()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_af438dacab126c7341147bab887d3d017_icgraph.png" border="0" usemap="#spi__master__lobo_8c_af438dacab126c7341147bab887d3d017_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_af438dacab126c7341147bab887d3d017_icgraph" id="spi__master__lobo_8c_af438dacab126c7341147bab887d3d017_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="789,63,867,90"/>
<area shape="rect" id="node3" href="tftspi_8h.html#ad03394df0f5eec8690112800456aa333" title="disp_deselect" alt="" coords="249,367,352,394"/>
<area shape="rect" id="node5" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85" title="TftDisplayBackend" alt="" coords="761,317,895,343"/>
<area shape="rect" id="node7" href="tft_8h.html#a2fe1259ac56d938ba10215531aaffb22" title="TFT_bmp_image" alt="" coords="425,317,545,343"/>
<area shape="rect" id="node13" href="spi__master__lobo_8h.html#aa854233c497b89be628679dfdc8f163e" title="Return the actuall SPI bus speed for the spi device in Hz. " alt="" coords="232,139,369,166"/>
<area shape="rect" id="node14" href="spi__master__lobo_8h.html#a7b9adfede36ff48e03fef4f4c7596bdb" title="Set the new clock speed for the device, return the actuall SPI bus speed set, in Hz This function can..." alt="" coords="232,215,369,242"/>
<area shape="rect" id="node15" href="spi__master__lobo_8h.html#af9e4e3ab6395f45cc506d72b2b0329d9" title="Transimit and receive data to/from spi device based on transaction data. " alt="" coords="224,570,377,597"/>
<area shape="rect" id="node4" href="tft_8h.html#addb4a0075dc026df3dbddcae6700e154" title="TFT_setRotation" alt="" coords="593,367,713,394"/>
<area shape="rect" id="node8" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb" title="read_data" alt="" coords="446,165,525,191"/>
<area shape="rect" id="node11" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475" title="find_rd_speed" alt="" coords="602,215,705,242"/>
<area shape="rect" id="node12" href="tftspi_8h.html#a6cac14690d3d53cab34227e9a39da1e8" title="_tft_setRotation" alt="" coords="428,418,543,445"/>
<area shape="rect" id="node6" href="class_content.html#af14b7b5ebc756686ecde73dc09b57c56" title="Content::Content" alt="" coords="943,317,1065,343"/>
<area shape="rect" id="node9" href="tftspi_8h.html#a20c1d0980fa142fe20c1e42d056f3581" title="readPixel" alt="" coords="615,165,691,191"/>
<area shape="rect" id="node10" href="tft_8h.html#a19e34da8841ba77c1125143df95e8c8a" title="TFT_readPixel" alt="" coords="775,165,881,191"/>
</map>
</div>

</div>
</div>
<a id="ab59d9707ee5d72fbc7e56af6db699c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab59d9707ee5d72fbc7e56af6db699c38">&#9670;&nbsp;</a></span>spi_lobo_device_GiveSemaphore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR spi_lobo_device_GiveSemaphore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, and <a class="el" href="spi__master__lobo_8h.html#aee709556a4c39503152f50f65130232f">spi_lobo_host_t::spi_lobo_bus_mutex</a>.</p>

</div>
</div>
<a id="accb77c930dad6f5b48cd33f969ee7202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb77c930dad6f5b48cd33f969ee7202">&#9670;&nbsp;</a></span>spi_lobo_device_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t IRAM_ATTR spi_lobo_device_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select spi device for transmission. </p>
<p>It configures spi bus with selected spi device parameters if previously selected device was different than the current If device's spics_io_num=-1 and spics_ext_io_num &gt; 0 'spics_ext_io_num' pin is set to active state (low)</p>
<p>spi bus device's semaphore is taken before selecting the device</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device </td></tr>
    <tr><td class="paramname">force</td><td>configure spi bus even if the previous device was the same</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>ESP_ERR_INVALID_ARG if parameter is invalid</li>
<li>ESP_OK on success </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a70a33482b1442d2118fb906ee8d50e07">spi_lobo_device_t::bus_config</a>, <a class="el" href="spi__master__lobo_8h.html#af2483849a2070b707c075ec237b272b5">spi_lobo_device_t::cfg</a>, <a class="el" href="spi__master__lobo_8h.html#abdb2a294e6a34416b52231b1218838f3">spi_lobo_host_t::cur_bus_config</a>, <a class="el" href="spi__master__lobo_8h.html#a2d0c39c04698d66e0716ef216de2deb4">spi_lobo_host_t::device</a>, <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#a9d357b54d006248103c7445724b816dd">NO_DEV</a>, <a class="el" href="spi__master__lobo_8h.html#a34a48bc1f9e3bd7f3a272484bed8cdc3">spi_lobo_device_interface_config_t::selected</a>, <a class="el" href="spi__master__lobo_8h.html#aee709556a4c39503152f50f65130232f">spi_lobo_host_t::spi_lobo_bus_mutex</a>, and <a class="el" href="spi__master__lobo_8h.html#a6ef4a2650bcb33a52b2e294ef6f70877">SPI_SEMAPHORE_WAIT</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>, <a class="el" href="tftspi_8h.html#a3bc44209686c6b9b178f12f4395c4f08">disp_select()</a>, <a class="el" href="spi__master__lobo_8h.html#aa854233c497b89be628679dfdc8f163e">spi_lobo_get_speed()</a>, <a class="el" href="spi__master__lobo_8h.html#a7b9adfede36ff48e03fef4f4c7596bdb">spi_lobo_set_speed()</a>, <a class="el" href="spi__master__lobo_8h.html#af9e4e3ab6395f45cc506d72b2b0329d9">spi_lobo_transfer_data()</a>, <a class="el" href="tft_8h.html#a2fe1259ac56d938ba10215531aaffb22">TFT_bmp_image()</a>, <a class="el" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85">TftDisplayBackend()</a>, and <a class="el" href="tftspi_8h.html#a435be36d3feaa16e7ee4add7b9c7868c">touch_get_data()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_accb77c930dad6f5b48cd33f969ee7202_icgraph.png" border="0" usemap="#spi__master__lobo_8c_accb77c930dad6f5b48cd33f969ee7202_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_accb77c930dad6f5b48cd33f969ee7202_icgraph" id="spi__master__lobo_8c_accb77c930dad6f5b48cd33f969ee7202_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="955,321,1034,348"/>
<area shape="rect" id="node3" href="tftspi_8h.html#a3bc44209686c6b9b178f12f4395c4f08" title="disp_select" alt="" coords="243,271,331,297"/>
<area shape="rect" id="node6" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85" title="TftDisplayBackend" alt="" coords="928,448,1061,475"/>
<area shape="rect" id="node8" href="tft_8h.html#a2fe1259ac56d938ba10215531aaffb22" title="TFT_bmp_image" alt="" coords="421,676,541,703"/>
<area shape="rect" id="node20" href="spi__master__lobo_8h.html#aa854233c497b89be628679dfdc8f163e" title="Return the actuall SPI bus speed for the spi device in Hz. " alt="" coords="412,448,549,475"/>
<area shape="rect" id="node21" href="spi__master__lobo_8h.html#a7b9adfede36ff48e03fef4f4c7596bdb" title="Set the new clock speed for the device, return the actuall SPI bus speed set, in Hz This function can..." alt="" coords="412,575,549,601"/>
<area shape="rect" id="node22" href="spi__master__lobo_8h.html#af9e4e3ab6395f45cc506d72b2b0329d9" title="Transimit and receive data to/from spi device based on transaction data. " alt="" coords="211,777,364,804"/>
<area shape="rect" id="node23" href="tftspi_8h.html#a435be36d3feaa16e7ee4add7b9c7868c" title="touch_get_data" alt="" coords="232,727,343,753"/>
<area shape="rect" id="node4" href="tft_8h.html#a336858c5e533fb64deaf2f9277e3fe4e" title="TFT_drawCircle" alt="" coords="423,43,538,69"/>
<area shape="rect" id="node5" href="tft_8h.html#addb4a0075dc026df3dbddcae6700e154" title="TFT_setRotation" alt="" coords="760,245,880,272"/>
<area shape="rect" id="node9" href="tftspi_8h.html#ac97e2b06e9897ab7260743d234feed9f" title="drawPixel" alt="" coords="441,93,520,120"/>
<area shape="rect" id="node10" href="tftspi_8h.html#a05266092c0a2d4cff12229c3bc063465" title="TFT_pushColorRep" alt="" coords="413,144,549,171"/>
<area shape="rect" id="node14" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb" title="read_data" alt="" coords="615,499,694,525"/>
<area shape="rect" id="node17" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475" title="find_rd_speed" alt="" coords="769,448,871,475"/>
<area shape="rect" id="node18" href="tftspi_8h.html#a6cac14690d3d53cab34227e9a39da1e8" title="_tft_setRotation" alt="" coords="597,195,712,221"/>
<area shape="rect" id="node19" href="tftspi_8h.html#a0d900ff959f34466f569f8f90adb17bf" title="TFT_display_init" alt="" coords="761,296,879,323"/>
<area shape="rect" id="node7" href="class_content.html#af14b7b5ebc756686ecde73dc09b57c56" title="Content::Content" alt="" coords="1109,448,1232,475"/>
<area shape="rect" id="node11" href="tft_8h.html#ae90d2fd1147b3831df93728fe1652a98" title="TFT_fillScreen" alt="" coords="601,144,708,171"/>
<area shape="rect" id="node12" href="tft_8h.html#a8f236b3382c64b8a8388ce13b2b46845" title="TFT_fillWindow" alt="" coords="598,93,711,120"/>
<area shape="rect" id="node13" href="class_face.html#accc1c9be034165c0d5e748549422b729" title="Face::Face" alt="" coords="776,93,864,120"/>
<area shape="rect" id="node15" href="tftspi_8h.html#a20c1d0980fa142fe20c1e42d056f3581" title="readPixel" alt="" coords="782,752,858,779"/>
<area shape="rect" id="node16" href="tft_8h.html#a19e34da8841ba77c1125143df95e8c8a" title="TFT_readPixel" alt="" coords="941,752,1048,779"/>
</map>
</div>

</div>
</div>
<a id="aa586bdb99451210c7ad47e29665098cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa586bdb99451210c7ad47e29665098cb">&#9670;&nbsp;</a></span>spi_lobo_device_TakeSemaphore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t IRAM_ATTR spi_lobo_device_TakeSemaphore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#aee709556a4c39503152f50f65130232f">spi_lobo_host_t::spi_lobo_bus_mutex</a>, and <a class="el" href="spi__master__lobo_8h.html#a6ef4a2650bcb33a52b2e294ef6f70877">SPI_SEMAPHORE_WAIT</a>.</p>

</div>
</div>
<a id="ac925bdfeebe7b9a0ec1b0e2732280e2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac925bdfeebe7b9a0ec1b0e2732280e2f">&#9670;&nbsp;</a></span>spi_lobo_dma_chan_claim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spi_lobo_dma_chan_claim </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dma_chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae8154907dcd4be54c64ea247a40d5947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8154907dcd4be54c64ea247a40d5947">&#9670;&nbsp;</a></span>spi_lobo_dma_chan_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spi_lobo_dma_chan_free </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dma_chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5da64efc4412da487c6e1094374dc85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5da64efc4412da487c6e1094374dc85d">&#9670;&nbsp;</a></span>spi_lobo_dmaworkaround_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR spi_lobo_dmaworkaround_idle </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmachan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a DMA channel as idle. </p>
<p>A call to this function tells the workaround logic that this channel will not be affected by a global SPI DMA reset. </p>

</div>
</div>
<a id="af2773e4297618ca50ed6544394a28b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2773e4297618ca50ed6544394a28b12">&#9670;&nbsp;</a></span>spi_lobo_dmaworkaround_req_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IRAM_ATTR spi_lobo_dmaworkaround_req_reset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmachan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8c.html#a7d4300ff147fff01be8e2c1a502f1342">dmaworkaround_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae1c564c0847b329912a678ec245d4530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1c564c0847b329912a678ec245d4530">&#9670;&nbsp;</a></span>spi_lobo_dmaworkaround_reset_in_progress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IRAM_ATTR spi_lobo_dmaworkaround_reset_in_progress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a DMA reset is requested but has not completed yet. </p>
<dl class="section return"><dt>Returns</dt><dd>True when a DMA reset is requested but hasn't completed yet. False otherwise. </dd></dl>

</div>
</div>
<a id="ac82ab5757c0f2f2d8345ba855313352f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac82ab5757c0f2f2d8345ba855313352f">&#9670;&nbsp;</a></span>spi_lobo_dmaworkaround_transfer_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR spi_lobo_dmaworkaround_transfer_active </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dmachan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a DMA channel as active. </p>
<p>A call to this function tells the workaround logic that this channel will be affected by a global SPI DMA reset, and a reset like that should not be attempted. </p>

</div>
</div>
<a id="a4047c33b24fb219f4dd02b293851c265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4047c33b24fb219f4dd02b293851c265">&#9670;&nbsp;</a></span>spi_lobo_get_native_pins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_lobo_get_native_pins </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sdi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sdo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sck</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get spi bus native spi pins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>places spi bus native pins in provided pointers </dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8c.html#ae9efd00bcdf67a23b5c5d2b92269ec7f">spi_signal_conn_t::spiclk_native</a>, <a class="el" href="spi__master__lobo_8c.html#afadc83695a3110598baae5d57130c1ac">spi_signal_conn_t::spid_native</a>, and <a class="el" href="spi__master__lobo_8c.html#a445a2b1a0c501f4c7c1d9ae774a81f63">spi_signal_conn_t::spiq_native</a>.</p>

</div>
</div>
<a id="aa854233c497b89be628679dfdc8f163e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa854233c497b89be628679dfdc8f163e">&#9670;&nbsp;</a></span>spi_lobo_get_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t spi_lobo_get_speed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the actuall SPI bus speed for the spi device in Hz. </p>
<p>Some frequencies cannot be set, for example 30000000 will actually set SPI clock to 26666666 Hz</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>actuall SPI clock </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#a9ce86f0c1a959b9144e03e96b84121f1">spi_lobo_host_t::hw</a>, <a class="el" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017">spi_lobo_device_deselect()</a>, and <a class="el" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202">spi_lobo_device_select()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>, <a class="el" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475">find_rd_speed()</a>, and <a class="el" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb">read_data()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_cgraph.png" border="0" usemap="#spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_cgraph" alt=""/></div>
<map name="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_cgraph" id="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_cgraph">
<area shape="rect" id="node2" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017" title="De&#45;select spi device. " alt="" coords="191,5,361,32"/>
<area shape="rect" id="node3" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202" title="Select spi device for transmission. " alt="" coords="197,56,355,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_icgraph.png" border="0" usemap="#spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_icgraph" id="spi__master__lobo_8c_aa854233c497b89be628679dfdc8f163e_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="495,5,574,32"/>
<area shape="rect" id="node3" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475" title="find_rd_speed" alt="" coords="317,56,420,83"/>
<area shape="rect" id="node6" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb" title="read_data" alt="" coords="191,107,269,133"/>
<area shape="rect" id="node4" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85" title="TftDisplayBackend" alt="" coords="468,56,601,83"/>
<area shape="rect" id="node5" href="class_content.html#af14b7b5ebc756686ecde73dc09b57c56" title="Content::Content" alt="" coords="649,56,772,83"/>
<area shape="rect" id="node7" href="tftspi_8h.html#a20c1d0980fa142fe20c1e42d056f3581" title="readPixel" alt="" coords="331,107,407,133"/>
<area shape="rect" id="node8" href="tft_8h.html#a19e34da8841ba77c1125143df95e8c8a" title="TFT_readPixel" alt="" coords="481,107,588,133"/>
</map>
</div>

</div>
</div>
<a id="a2175e2887a4b28e05f1b62a1d95e3523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2175e2887a4b28e05f1b62a1d95e3523">&#9670;&nbsp;</a></span>spi_lobo_periph_claim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spi_lobo_periph_claim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a>&#160;</td>
          <td class="paramname"><em>host</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2cfd6d9164d3f2ace4f6d7f1c4e14503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cfd6d9164d3f2ace4f6d7f1c4e14503">&#9670;&nbsp;</a></span>spi_lobo_periph_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spi_lobo_periph_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#afbbfae97a25f145dbb757b224f2e14af">spi_lobo_host_device_t</a>&#160;</td>
          <td class="paramname"><em>host</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b9adfede36ff48e03fef4f4c7596bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b9adfede36ff48e03fef4f4c7596bdb">&#9670;&nbsp;</a></span>spi_lobo_set_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t spi_lobo_set_speed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the new clock speed for the device, return the actuall SPI bus speed set, in Hz This function can be used after the device is initialized. </p>
<p>Some frequencies cannot be set, for example 30000000 will actually set SPI clock to 26666666 Hz</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device </td></tr>
    <tr><td class="paramname">speed</td><td>New device spi clock to be set in Hz</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>actuall SPI clock</li>
<li>0 if speed cannot be set </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#af2483849a2070b707c075ec237b272b5">spi_lobo_device_t::cfg</a>, <a class="el" href="spi__master__lobo_8h.html#a9a8af59c946d69b8d908c9af8d736731">spi_lobo_device_interface_config_t::clock_speed_hz</a>, <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#a9ce86f0c1a959b9144e03e96b84121f1">spi_lobo_host_t::hw</a>, <a class="el" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017">spi_lobo_device_deselect()</a>, and <a class="el" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202">spi_lobo_device_select()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>, <a class="el" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475">find_rd_speed()</a>, <a class="el" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb">read_data()</a>, and <a class="el" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85">TftDisplayBackend()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_cgraph.png" border="0" usemap="#spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_cgraph" alt=""/></div>
<map name="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_cgraph" id="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_cgraph">
<area shape="rect" id="node2" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017" title="De&#45;select spi device. " alt="" coords="191,5,361,32"/>
<area shape="rect" id="node3" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202" title="Select spi device for transmission. " alt="" coords="197,56,355,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_icgraph.png" border="0" usemap="#spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_icgraph" id="spi__master__lobo_8c_a7b9adfede36ff48e03fef4f4c7596bdb_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="495,5,574,32"/>
<area shape="rect" id="node3" href="tftspi_8h.html#a80ddf39857da193f67da800950e1a475" title="find_rd_speed" alt="" coords="317,43,420,69"/>
<area shape="rect" id="node4" href="_tft_display_backend_8c.html#ac2d4c980b150da51c7e5f73af22a4b85" title="TftDisplayBackend" alt="" coords="468,68,601,95"/>
<area shape="rect" id="node6" href="tftspi_8h.html#a2252ee1cee494c40c068461b6e1515eb" title="read_data" alt="" coords="191,144,269,171"/>
<area shape="rect" id="node5" href="class_content.html#af14b7b5ebc756686ecde73dc09b57c56" title="Content::Content" alt="" coords="649,68,772,95"/>
<area shape="rect" id="node7" href="tftspi_8h.html#a20c1d0980fa142fe20c1e42d056f3581" title="readPixel" alt="" coords="331,144,407,171"/>
<area shape="rect" id="node8" href="tft_8h.html#a19e34da8841ba77c1125143df95e8c8a" title="TFT_readPixel" alt="" coords="481,144,588,171"/>
</map>
</div>

</div>
</div>
<a id="afbd48c0566cfee5cdbefc612c65610b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd48c0566cfee5cdbefc612c65610b6">&#9670;&nbsp;</a></span>spi_lobo_setup_dma_desc_links()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_lobo_setup_dma_desc_links </td>
          <td>(</td>
          <td class="paramtype">lldesc_t *&#160;</td>
          <td class="paramname"><em>dmadesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isrx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup a DMA link chain. </p>
<p>This routine will set up a chain of linked DMA descriptors in the array pointed to by <code>dmadesc</code>. Enough DMA descriptors will be used to fit the buffer of <code>len</code> bytes in, and the descriptors will point to the corresponding positions in <code>buffer</code> and linked together. The end result is that feeding <code>dmadesc[0]</code> into DMA hardware results in the entirety <code>len</code> bytes of <code>data</code> being read or written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dmadesc</td><td>Pointer to array of DMA descriptors big enough to be able to convey <code>len</code> bytes </td></tr>
    <tr><td class="paramname">len</td><td>Length of buffer </td></tr>
    <tr><td class="paramname">data</td><td>Data buffer to use for DMA transfer </td></tr>
    <tr><td class="paramname">isrx</td><td>True if data is to be written into <code>data</code>, false if it's to be read from <code>data</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a28d038c3b926bf899d56d94445224e91">SPI_MAX_DMA_LEN</a>.</p>

</div>
</div>
<a id="af013ec9776a6cb6735f7999807274ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af013ec9776a6cb6735f7999807274ba8">&#9670;&nbsp;</a></span>spi_lobo_transfer_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t IRAM_ATTR spi_lobo_transfer_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#structspi__lobo__transaction__t">spi_lobo_transaction_t</a> *&#160;</td>
          <td class="paramname"><em>trans</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transimit and receive data to/from spi device based on transaction data. </p>
<p>TRANSMIT 8-bit data to spi device from 'trans-&gt;tx_buffer' or 'trans-&gt;tx_data' (trans-&gt;lenght/8 bytes) and RECEIVE data to 'trans-&gt;rx_buffer' or 'trans-&gt;rx_data' (trans-&gt;rx_length/8 bytes) Lengths must be 8-bit multiples! If trans-&gt;rx_buffer is NULL or trans-&gt;rx_length is 0, only transmits data If trans-&gt;tx_buffer is NULL or trans-&gt;length is 0, only receives data If the device is in duplex mode (LB_SPI_DEVICE_HALFDUPLEX flag NOT set), data are transmitted and received simultaneously. If the device is in half duplex mode (LB_SPI_DEVICE_HALFDUPLEX flag IS set), data are received after transmission 'address', 'command' and 'dummy bits' are transmitted before data phase IF set in device's configuration and IF 'trans-&gt;length' and 'trans-&gt;rx_length' are NOT both 0 If device was not previously selected, it will be selected before transmission and deselected after transmission.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device</td></tr>
    <tr><td class="paramname">trans</td><td>Pointer to variable containing the description of the transaction that is executed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>ESP_ERR_INVALID_ARG if parameter is invalid</li>
<li>ESP error code if device cannot be selected</li>
<li>ESP_OK on success </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#af14c72df38f19887bcf6482968671105">spi_lobo_transaction_t::address</a>, <a class="el" href="spi__master__lobo_8h.html#add097bb61cdf6e046d59186302e0ddfa">spi_lobo_device_interface_config_t::address_bits</a>, <a class="el" href="spi__master__lobo_8h.html#af2483849a2070b707c075ec237b272b5">spi_lobo_device_t::cfg</a>, <a class="el" href="spi__master__lobo_8h.html#ad60a4a4b03cbb3337c1b5439edd81636">spi_lobo_transaction_t::command</a>, <a class="el" href="spi__master__lobo_8h.html#a58cdcde9c930120466c738a14d6f6fab">spi_lobo_device_interface_config_t::flags</a>, <a class="el" href="spi__master__lobo_8h.html#a6b6eb10f485e993841a9246642d50b07">spi_lobo_transaction_t::flags</a>, <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, <a class="el" href="spi__master__lobo_8h.html#a9ce86f0c1a959b9144e03e96b84121f1">spi_lobo_host_t::hw</a>, <a class="el" href="spi__master__lobo_8h.html#a952154a78f2bbbd483a1d4a69e3a6e46">LB_SPI_DEVICE_HALFDUPLEX</a>, <a class="el" href="spi__master__lobo_8h.html#a56ea53b47e908cab01ca8e6b0ca49804">LB_SPI_TRANS_USE_RXDATA</a>, <a class="el" href="spi__master__lobo_8h.html#a8e005016d92b17a7d7fb1fed6f553567">LB_SPI_TRANS_USE_TXDATA</a>, <a class="el" href="spi__master__lobo_8h.html#a4658fb2c0af57630a9087ce797524b30">spi_lobo_transaction_t::length</a>, <a class="el" href="spi__master__lobo_8h.html#ab4fed50557ba4c272fc251a2899bec39">spi_lobo_device_interface_config_t::post_cb</a>, <a class="el" href="spi__master__lobo_8h.html#a376f3dd09a6ccae99ab3c47690152c6e">spi_lobo_device_interface_config_t::pre_cb</a>, <a class="el" href="spi__master__lobo_8h.html#a99c48756ddf104edc116ca2d7cbf3782">spi_lobo_transaction_t::rxlength</a>, <a class="el" href="spi__master__lobo_8h.html#a34a48bc1f9e3bd7f3a272484bed8cdc3">spi_lobo_device_interface_config_t::selected</a>, <a class="el" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017">spi_lobo_device_deselect()</a>, and <a class="el" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202">spi_lobo_device_select()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_af013ec9776a6cb6735f7999807274ba8_cgraph.png" border="0" usemap="#spi__master__lobo_8c_af013ec9776a6cb6735f7999807274ba8_cgraph" alt=""/></div>
<map name="spi__master__lobo_8c_af013ec9776a6cb6735f7999807274ba8_cgraph" id="spi__master__lobo_8c_af013ec9776a6cb6735f7999807274ba8_cgraph">
<area shape="rect" id="node2" href="spi__master__lobo_8c.html#af438dacab126c7341147bab887d3d017" title="De&#45;select spi device. " alt="" coords="207,5,377,32"/>
<area shape="rect" id="node3" href="spi__master__lobo_8c.html#accb77c930dad6f5b48cd33f969ee7202" title="Select spi device for transmission. " alt="" coords="213,56,371,83"/>
</map>
</div>

</div>
</div>
<a id="ab00be9c566e4805cb3007fd4b0e075c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00be9c566e4805cb3007fd4b0e075c3">&#9670;&nbsp;</a></span>spi_lobo_uses_native_pins()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spi_lobo_uses_native_pins </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="spi__master__lobo_8h.html#adb6083b952d07eedde7eef9b837b23ef">spi_lobo_device_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if spi bus uses native spi pins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Device handle obtained using spi_lobo_bus_add_device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>true if native spi pins are used</li>
<li>false if spi pins are routed through gpio matrix </li>
</ul>
</dd></dl>

<p class="reference">References <a class="el" href="spi__master__lobo_8h.html#a9186a9d112b03dedd3ec31713aba37ce">spi_lobo_device_t::host</a>, and <a class="el" href="spi__master__lobo_8h.html#a425ee2633d3a132b92715392741032f4">spi_lobo_host_t::no_gpio_matrix</a>.</p>

<p class="reference">Referenced by <a class="el" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36">app_main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__master__lobo_8c_ab00be9c566e4805cb3007fd4b0e075c3_icgraph.png" border="0" usemap="#spi__master__lobo_8c_ab00be9c566e4805cb3007fd4b0e075c3_icgraph" alt=""/></div>
<map name="spi__master__lobo_8c_ab00be9c566e4805cb3007fd4b0e075c3_icgraph" id="spi__master__lobo_8c_ab00be9c566e4805cb3007fd4b0e075c3_icgraph">
<area shape="rect" id="node2" href="tft__demo_8c.html#abce06be17fc37d675118a678a8100a36" title="app_main" alt="" coords="232,5,311,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2e432a94a446bdaf24f01884460e4388.html">HardwareLife</a></li><li class="navelem"><a class="el" href="dir_b9f7ad96a641eef2169d7ec2e0317c1c.html">Lcd</a></li><li class="navelem"><a class="el" href="dir_5cd0db305b0f4f965dd03c8af5bff79c.html">ESP32_TFT_library</a></li><li class="navelem"><a class="el" href="dir_a6c4c7cd388b468f9c3da35a800fb694.html">components</a></li><li class="navelem"><a class="el" href="dir_d028ae08222e37ad3de28e8b314b8106.html">spidriver</a></li><li class="navelem"><a class="el" href="spi__master__lobo_8c.html">spi_master_lobo.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
